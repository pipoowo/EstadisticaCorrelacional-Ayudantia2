---
title: "Ayudantía 2: Spearman Y Tau de Kendall"
subtitle: "Estadística Correlacional"
author: "Equipo de Ayudantes"
date: 2025-10-20
lang: es
date-format: "long"
format:
  revealjs:
    theme: simple
    slide-number: true
    transition: fade
    transition-speed: slow
css: styles.css
editor: visual
echo: true
---

```{r}
#| echo: false
pacman::p_load(tidyverse, # Manipulacion de datos
               car, # Recodificar
               sjPlot, # Tablas y graficos
               sjmisc, # Descriptivos
               kableExtra, # Tablas
               psych, # Bivariados
               corrplot, # Graficos correlacioj
               broom,
              gt) # Varios
options(scipen = 999) # para desactivar notacion cientifica
rm(list = ls()) # para limpiar el entorno de trabajo
```

## Spearman (rho)

Utilizado para calcular la correlación entre variables ordinales, se basa en el ordenamiento de las observaciones en un ranking. Estos se ordenan de menor a mayor, y se le asigna el ranking mayor al dato de menor valor, y así sucesivamente.

```{r}
#| echo: false
#| output: true
datos <- data.frame(
  estudiante = c("A", "B", "C", "D", "E", "F"),
  calidad_de_sueño = c(0, 1, 2, 3, 4, 4), # 0: muy mala - 4: muy buena
  rendimiento_académico = c(0, 1, 0, 3, 3, 4) # 0: pesimo - 4: excelente
)
print(datos)
```

## Spearman

Siguiendo el ejemplo anterior, los valores se ordenan y se les asigna un ranking según su posición:

0 (6), 1 (5), 2 (4), 3 (3), 4 (2), 4 (1).

Si existen valores repetidos (empates), se asigna a cada uno el promedio de los rankings que ocuparían:

El valor 4 está repetido dos veces en el ranking 5 y 6. Por lo tanto, los estudiantes E y F ocupan el ranking 5.5.

## Cálculo de Spearman

Para efectos prácticos, ocuparemos el siguiente código de R para calcular este tipo de correlación:

```{r}
#| output: false
#| eval: false
cor.test(basededatos$variable1, basededatos$variable2, method = "spearman")
```

Así, obtendremos valor-p y el valor de la correlación (rho).

## Interpretación

-   ρ = +1: Relación perfecta positiva (cuando X aumenta, Y siempre aumenta).

-   ρ = -1: Relación perfecta negativa (cuando X aumenta, Y siempre disminuye).

-   ρ = 0: No hay relación monotónica.

-   0 \< \|ρ\| \< 1

## Recordar...

-   Los valores de Spearman se interpretan igual que Pearson, de -1 a 1.

-   Es utilizado para calcular correlación entre variables ordinales.

-   No requiere distribución normal.

## Tau de kendall (tau)

Similar a Spearman, pero da resultados más robustos cuando hay muchos empates de datos, valores extremos o con baja cantidad de casos.

Para efectos prácticos, ocuparemos el siguiente código de R para calcularlo:

```{r}
#| output: false
#| eval: false
cor.test(basededatos$variable1, basededatos$variable2,
         "two.sided", 
         "kendall")
```

## Compara la prevalencia entre ellos...

Concordantes: Se basa en la comparación de observaciones en la misma dirección.

X₁ \< X₂ y Y₁ \< Y₂, o

X₁ \> X₂ y Y₁ \> Y₂

Discordantes: distinta dirección.

X₁ \< X₂ pero Y₁ \> Y₂, o

X₁ \> X₂ pero Y₁ \< Y₂

## Interpretación

***Rango: -1 ≤ τ ≤ 1***

-   τ = 1: Concordancia perfecta (todos los pares son concordantes).

-   τ = -1: Discordancia perfecta (todos los pares son discordantes).

-   τ = 0: No hay asociación .

## Ejercicio

**¿En qué medida se relacionan la percepción de desigualdad de las personas con su percepción de conflicto entre directivos y trabajadores?**

```{r}
pacman::p_load(tidyverse, # Manipulacion de datos
               car, # Recodificar
               sjPlot, # Tablas y graficos
               sjmisc, # Descriptivos
               kableExtra, # Tablas
               psych, # Bivariados
               corrplot, # Graficos correlacioj
               broom) # Varios

options(scipen = 999) # para desactivar notacion cientifica
rm(list = ls()) # para limpiar el entorno de trabajo

# Cargar bbdd desde internet
load(url("https://github.com/cursos-metodos-facso/datos-ejemplos/raw/refs/heads/main/issp_2009_chile.RData"))
```

## Procesamiento de variables a utilizar

Vamos a ocupar solamente en este ejercicio las variables ordinales ***perc_ineq*** y ***conflict_mw:***

```{r}
proc_issp <- issp %>% # seleccionamos
    dplyr::select(perc_ineq,
                  conflict_mw) 
```

-   ***perc_ineq***: percepción de desigualdad (nivel de acuerdo con que las diferencias de ingreso en Chile son demasiado grandes).

-   ***conflict_mw:*** percepción de la fuerza de conflicto entre directivos y los trabajadores.

## Variables a utilizar

La opción summary nos permite conocer los descriptivos de las variables:

```{r}
summary(proc_issp$perc_ineq) # Percepción de desigualdad
```

```{r}
summary(proc_issp$conflict_mw)# preferencia por redistribución
```

## Usando Spearman

```{r}
cor.test(proc_issp$perc_ineq, proc_issp$conflict_mw, method = "spearman")
```

## Usando Tau de Kendall

```{r}
cor.test(proc_issp$perc_ineq, proc_issp$conflict_mw,
         "two.sided", 
         "kendall")
```

## Interpretación

Se empleó el ***coeficiente de correlación de Spearman*** debido a la naturaleza de las variables, en tanto ambas son ***variables ordinales*****.** El coeficiente da cuenta de una ***relacion positiva y pequeña***, siguiendo los ***criterios de Cohen*** (1988) ***(r = 0.14)**.* Es decir, ***a medida que aumenta la percepción de de desigualdad, también aumenta la percepción de la fuerza de conflicto entre directivos y trabajadores***. La relación es ***estadísticamente significativa (p \< 0.001)***, por ende es posible rechazar H0 sobre no asociación entre variables, entregando evidencia a favor de una relación entre ambas variables con un 99.9% de confianza.

***¿Cuál sería la interpretación a partir del coeficiente de tau de Kendall obtenido?***

## Conclusión

-   Tanto Spearman como Kendall son medidas de correlación entre dos variables (principalmente ordinales) que indican fuerza y sentido de la asociación.

-   Spearman se basa en rangos/ranking, mientras Kendall en concordancias y discordancias entre pares.

-   Spearman suele dar valores más altos, pero Kendall es más robusto.

# **Gracias por su atención !**
