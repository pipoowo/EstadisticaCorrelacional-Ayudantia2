---
title: "Ayudantía 2: Spearman Y Tau de Kendall"
subtitle: "Estadística Correlacional"
author: "Equipo de Ayudantes"
date: 2025-10-17
lang: es
date-format: "long"
format:
  revealjs:
    theme: simple
    slide-number: true
    transition: fade
    transition-speed: slow
css: styles.css
editor: visual
echo: true
---

```{r}
#| echo: false
pacman::p_load(tidyverse, # Manipulacion de datos
               car, # Recodificar
               sjPlot, # Tablas y graficos
               sjmisc, # Descriptivos
               kableExtra, # Tablas
               psych, # Bivariados
               corrplot, # Graficos correlacioj
               broom,
              gt) # Varios
options(scipen = 999) # para desactivar notacion cientifica
rm(list = ls()) # para limpiar el entorno de trabajo
```

## Spearman

Utilizado para calcular la correlación entre variables ordinales. Ejemplo: notas y horas de estudio. Spearman se basa en el ordenamiento de las observaciones en un ranking. Estos se ordenan de menor a mayor, y asignamos el ranking mayor al dato de menor valor, y así sucesivamente.

```{r}
#| echo: false
#| output: true
datos <- data.frame(
  estudiante = c("A", "B", "C", "D", "E", "F"),
  calidad_de_sueño = c(0, 1, 2, 3, 4, 4), # 0: muy mala - 4: muy buena
  rendimiento_académico = c(0, 1, 0, 3, 3, 4) # 0: pesimo - 4: excelente
)
print(datos)
```

## Spearman

En el caso de las horas, se ordenarían de la siguiente manera: 0, 1, 2, 3, 4, 4

y se les asignaría el ranking: 6, 5, 4, 3, 2, 1.

Si existen dos valores (o más) que se repiten, se promedian los ránking que ocuparían.

Ejemplo: el valor 4 esta repetido dos veces en el ránking 5 y 6.

Promedio: 5.5 ⟶ por lo tanto, los casos (estudiantes) E y F ocupan el ránking 5.5.

## Cálculo de Spearman

Para efectos prácticos, ocuparemos el siguiente código de R para calcular este tipo de correlación:

```{r}
#| output: false
#| eval: false
cor.test(basededatos$variable1, basededatos$variable2, method = "spearman")
```

Así, obtendremos valor-p y el valor de la correlación (rho).

## Interpretación

-   ρ = +1: Relación perfecta positiva (cuando X aumenta, Y siempre aumenta).

-   ρ = -1: Relación perfecta negativa (cuando X aumenta, Y siempre disminuye).

-   ρ = 0: No hay relación monotónica.

-   0 \< \|ρ\| \< 1

## Recordar...

-   Los valores de Spearman se interpretan igual que Pearson, de -1 a 1.

-   Es utilizado para calcular correlación entre variables ordinales.

-   No requiere distribución normal.

## Tau de kendall

Similar a Spearman, pero da resultados más robustos cuando hay muchos empates de datos, valores extremos o con baja cantidad de casos.

Para efectos prácticos, ocuparemos el siguiente código de R para calcularlo:

```{r}
#| output: false
#| eval: false
cor.test(basededatos$variable1, basededatos$variable2,
         "two.sided", 
         "kendall")
```

## Compara la prevalencia entre ellos...

Concordantes: Se basa en la comparación de observaciones concordantes: misma dirección.

X₁ \< X₂ y Y₁ \< Y₂, o

X₁ \> X₂ y Y₁ \> Y₂

Discordantes: distinta dirección.

X₁ \< X₂ pero Y₁ \> Y₂, o

X₁ \> X₂ pero Y₁ \< Y₂

## Interpretación

***Rango: -1 ≤ τ ≤ 1***

-   τ = 1: Concordancia perfecta (todos los pares son concordantes).

-   τ = -1: Discordancia perfecta (todos los pares son discordantes).

-   τ = 0: No hay asociación .

## Ejercicio

**¿En qué medida se relacionan el estatus social subjetivo de las personas con preferencia por redistribución?**

```{r}
pacman::p_load(tidyverse, # Manipulacion de datos
               car, # Recodificar
               sjPlot, # Tablas y graficos
               sjmisc, # Descriptivos
               kableExtra, # Tablas
               psych, # Bivariados
               corrplot, # Graficos correlacioj
               broom) # Varios

options(scipen = 999) # para desactivar notacion cientifica
rm(list = ls()) # para limpiar el entorno de trabajo

load(url("https://github.com/cursos-metodos-facso/datos-ejemplos/raw/refs/heads/main/issp_2009_chile.RData")) # base de datos a utilizar
```

## Procesamiento de variables a utilizar

Vamos a ocupar solamente en este ejercicio las variables ordinales ***topbot*** y ***pref_redis:***

```{r}
proc_issp <- issp %>% # seleccionamos
    dplyr::select(topbot,
                  pref_redis) 
```

## Usando Spearman...

```{r}
cor.test(proc_issp$topbot, proc_issp$pref_redis, method = "spearman")
```

## Usando Tau de Kendall

```{r}
cor.test(proc_issp$topbot, proc_issp$pref_redis,
         "two.sided", 
         "kendall")
```

# **Gracias por su atención !**
